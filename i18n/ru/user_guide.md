# Итак, вы установили Коври. Что теперь?

## Шаг 1. Откройте свой NAT/Firewall
1. Выберите порт между ```9111``` и ```30777```
2. **Сохраните этот порт в файле конфигурации** (`kovri.conf`)
3. Добавьте исключение в вашем NAT/Firewall, чтобы разрешить входящие TCP/UDP соединения с этим портом (см. примечания ниже, если у вас нет доступа)

Заметки:

- Если вы не сохраните порт, Kovri будет произвольно генерировать новый при каждом запуске (у вас также есть вариант задавать порт параметром `--port` при каждом запуске).
- Если у вас нет доступа к вашему NAT, см. Инструкции в [руководстве сборки](https://github.com/monero-project/kovri-docs/blob/master/i18n/ru/building.md) для своей ОС.
- **Не сообщайте никому свой номер порта, поскольку это влияет на вашу анонимность!**

## Шаг 2. (Рекомендовано) Рабочая безопасность

- Подумайте о создании отдельного пользователя `kovri` и запускайте kovri используя только этого пользователя
- Если используете Linux, подумайте об использовании защищенного ядра (такого как [grsec](https://en.wikibooks.org/wiki/Grsecurity) с RBAC)
- После установки необходимых ресурсов в папку kovri, рассмотрите возможность установки соответствующего контроля доступа с [setfacl](https://linux.die.net/man/1/setfacl), [umask](https://en.wikipedia.org/wiki/Umask), или что использует ваша ОС для ACL
- Никогда не сообщайте свой номер порта никому, так как это повлияет на вашу анонимность!

**Примечание: см. kovri.conf, чтобы найти папку для Linux/OSX/Windows**

## Шаг 3. Настройка Kovri, Установка тунелей

Для получения полного списка опций выполните:

```bash
# Linux / macOS / *BSD
$ cd ~/bin && ./kovri --help
```

```bash
# Windows (PowerShell / MSYS2)
$ cd "C:\Program Files\Kovri" ; ./kovri.exe --help
```

Полный список параметров с описанием:

- `kovri.conf` файл конфигурации для маршрутизатора и клиента
- `tunnels.conf` файл конфигурации для туннелей клиент/сервер

## Шаг 4. (Выборочно) Установка тунелей

Кратко, *клиентские тунели(client tunnels)*, тунели которые вы используете для подключения к другим сервисам, а *серверные тунели(server tunnels)* используются, когда сервис(ы) располагается у вас (и другие люди подключаются к вашему сервису).

По умолчанию, у вас будут установлены клиентские тунели для IRC (Irc2P) и email (i2pmail). Чтобы добавить\удалить клиентские тунели, смотри `tunnels.conf`.

При создании серверного тунеля(ей), вам необходимо создать *(постоянные закрытые ключи(persistent private keys)*. Для этого раскомментируйте или создайте `keys = your-keys.dat` и замените `your-keys` на соответствующее имя. **Не передавайте никому ваш личный `.dat` файл, и не забудьте сделать резервную копию!**

После настройки, ваш [Base32 адрес](https://getmonero.org/resources/moneropedia/base32-address) будет показан в вашем журнале, после запуска kovri. Также можно найти адрес в текстовом файле рядом с файлом закрытых ключей, в папке с kovri в `client/keys` папке. Адрес внутри этого `.txt` текстового файла можно спокойно распространять, чтобы люди могли подключиться к вашему сервису.

Например:

- Файл закрытых ключей: `client/keys/your-keys.dat`
- Публичный [Base32](https://getmonero.org/resources/moneropedia/base32-address)/[Base64](https://getmonero.org/resources/moneropedia/base64-address) адрес: `client/keys/your-keys.dat.txt`

**Примечание: см. kovri.conf, чтобы найти папку для Linux/OSX/Windows**

## Шаг 5. (Выборочно) Зарегистрируйте свой новый [eepsite](https://getmonero.org/resources/moneropedia/eepsite)

**Стоп! Пока не решено [#498](https://github.com/monero-project/kovri/issues/498), подумайте над регистрацией вашего сервиса только с Kovri, а *не* с stats.i2p!**

- Откройте запрос с `[Subscription Request] your-host.i2p` (замените your-host.i2p на нужное имя хоста) в [Kovri issue tracker](https://github.com/monero-project/kovri/issues)
- В тело запроса вставьте содержимое вашего открытого файла `.txt`, упомянутого на предыдущем шаге
- После проверки мы добавим ваш хост и подпишем подписку
- Готово!

## Шаг 6. Запуск  Kovri
```bash
$ cd build/ && ./kovri
```
- Подождите около 5 минут, чтобы присоединиться к сети, прежде чем пробовать использовать сервисы

## Шаг 7. Присоединяйтесь к нам на IRC
1. Запустите свой [IRC-клиент](https://ru.wikipedia.org/wiki/Список_IRC-клиентов)
2. Настройте ваш клиент для подключения к IRC-порту Kovri (по умолчанию 6669). Это соединит вас с сетью Irc2P (ICP IRC-сеть)
3. Присоединитесь к `#kovri` и `#kovri-dev`

## Шаг 8. Просмотрите веб-сайт I2P (garlic-сайт/eep-сайт)
1. Запустите браузер, на ваш выбор (предпочтительно браузер, рекомендованный Kovri)
2. Настройте свой браузер, прочитав [эти инструкции](https://geti2p.net/ru/about/browser-config) **но вместо портов 4444 и 4445** измените порт прокси-сервера HTTP на **4446** и SSL-прокси-порт *также* на **4446**
3. Посетите сайт http://check.kovri.i2p

Заметки:

- **Как и в случае с Tor, не требуется SSL для  защищенного и безопасного использования сети**
- Поддержка SSL и служба outproxy в настоящее время не реализованы
- Если кто-то дает вам адрес .i2p, которого нет в вашей адресной книге, используйте службу `Jump` по адресу http://stats.i2p/i2p/lookup.html
- Просмотрите файл hosts.txt в своем каталоге данных, чтобы просмотреть список сайтов по умолчанию, которые вы легко можете посетить.
- В целом, реализация HTTP-прокси и адресной книги находится в разработке и еще не полностью закончена

## Шаг 9. Наслаждайтесь!
- Почитать больше о Kovri в [Moneropedia](https://getmonero.org/resources/moneropedia/kovri).
- Открыть запрос на доработку или сообщить об ошибке в наш [issues tracker](https://github.com/monero-project/kovri/issues)
- Узнать больше о сети I2P [сайте java I2P](https://geti2p.net/en/docs)


# Варианты с использованием контейнеров

## Snapcraft

В системах Linux используйте snapcraft для легкого развертывания.

### Шаг 1. Получить исходники Kovri

```bash
$ git clone --recursive https://github.com/monero-project/kovri
```

### Шаг 2. Установить snapcraft

- Используйте пакетный менеджер вашего дистрибутива для установки snapcraft и [snapd](https://snapcraft.io/docs/core/install)

В Ubuntu, просто выполните:
```bash
$ sudo apt-get install snapcraft
```

### Шаг 3. Создать snap

```bash
$ cd kovri/ && snapcraft && sudo snap install *.snap --dangerous
```
Примечание: флаг --dangerous необходим только потому, что snap не был подписан (вы сами его создали, так что это не проблема)

### шаг 4. Запустить Kovri в snapcraft

```bash
$ snap run kovri
```

## Docker

## Шаг 1. Установка Docker
Установка Docker выходит за рамки этого документа, см. [Документацию docker](https://docs.docker.com/engine/installation/)

## Шаг 2. Настройка/Открытие брандмауэра

Образ docker поставляется со значениями Kovri по умолчанию, но может быть настроен так, как описано в предыдущих разделах.

Вы должны выбрать случайный порт и открыть этот порт (см. Предыдущие разделы).

## Шаг 3. Запуск

### Настройки по умолчанию
```bash
KOVRI_PORT=42085 && sudo docker run -p 127.0.0.1:4446:4446 -p 127.0.0.1:6669:6669 -p $KOVRI_PORT --env KOVRI_PORT=$KOVRI_PORT geti2p/kovri
```

### Пользовательские настройки 

```bash
KOVRI_PORT=42085 && sudo docker run -p 127.0.0.1:4446:4446 -p 127.0.0.1:6669:6669 -p $KOVRI_PORT --env KOVRI_PORT=$KOVRI_PORT -v kovri-settings:/home/kovri/.kovri/config:ro geti2p/kovri
```
Где в  `./kovri-settings/` содержится `kovri.conf` и `tunnels.conf`.
